üìå –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ —ç–º—É–ª—è—Ç–æ—Ä –ü–õ–ö c –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º –æ—Å–≤–µ—â–µ–Ω–∏—è –∏ —Å–µ—Ä–≤–µ—Ä–æ–º Modbus/TCP (slave).
SCADA (MasterSCADA) —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—ë—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π –∏ —Ñ–ª–∞–≥–∏ —á–µ—Ä–µ–∑ Modbus; —Å–∞–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (—ç–º—É–ª—è—Ç–æ—Ä) –≤–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç ¬´–∑–æ–Ω–Ω—ã–µ¬ª –∫–∞—Ç—É—à–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏.

–ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫. Windows, Winsock.

üß≠ –ö–∞—Ä—Ç–∞ –∞–¥—Ä–µ—Å–æ–≤ (offset —Å –Ω—É–ª—è)
Coils (–∫–∞—Ç—É—à–∫–∏)
0.. ‚Äî –≤—ã—Ö–æ–¥—ã –∑–æ–Ω (–∏—Ö –≤–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫).
500 + i ‚Äî remote_enable –¥–ª—è —Å–ª–æ—Ç–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è i (0/1).

Holding-—Ä–µ–≥–∏—Å—Ç—Ä—ã
HR 0 ‚Äî heartbeat (—Å—á—ë—Ç—á–∏–∫, +1 –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É).
HR 1 ‚Äî —á–∏—Å–ª–æ —Å–ª–æ—Ç–æ–≤ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 16.
HR 2 ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –±–∏—Ç0=1 ‚Üí –º—è–≥–∫–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —ç–º—É–ª—è—Ç–æ—Ä–∞.
–°–ª–æ—Ç—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å HR 100, –ø–æ 10 —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –Ω–∞ —Å–ª–æ—Ç:

base = 100 + i*10
base+0 : enabled (0/1)
base+1 : type (0=weekly, 1=once)
base+2 : area_coil (offset –∫–∞—Ç—É—à–∫–∏ –∑–æ–Ω—ã)
base+3 : days_mask (–±–∏—Ç0=Sun..–±–∏—Ç6=Sat), weekly
base+4 : start_min (0..1439) = HH*60 + MM
base+5 : duration_min (>0)
base+6 : date_year  (YYYY), once
base+7 : date_month (1..12), once
base+8 : date_day   (1..31), once
base+9 : status (0=idle, 1=active, 2=consumed) ‚Äî —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ

‚öôÔ∏è –°–±–æ—Ä–∫–∞
cmake -S . -B build
cmake --build build --config Release

‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫
.\build\Release\plc_sched_emulator.exe [–ø–æ—Ä—Ç] [unit_id]

